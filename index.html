
<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Scan QR untuk Check-in</title>
  <script src="https://unpkg.com/html5-qrcode"></script>
</head>
<body>
  <h1>Scan QR Code</h1>
  <div id="reader" style="width: 300px; margin: auto;"></div>
  <p id="status">Status: Menunggu scan...</p>

  <script>
    const html5QrCode = new Html5Qrcode("reader");
    const config = { fps: 10, qrbox: 250 };
    const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbxC-kcxtWiT4OK2pjIu7ZtQi4_ozxou2NOmXwe0Dxo3Hwhimiqo8-0B6D4HwJz8OHzepw/exec"; // Ganti dengan URL Web App kamu

    html5QrCode.start(
      { facingMode: "environment" },
      config,
      qrCodeMessage => {
        console.log("QR Code terbaca:", qrCodeMessage);
        document.getElementById("status").innerText = `Membuka data untuk: ${qrCodeMessage}`;

        const redirectUrl = `${WEB_APP_URL}?kode=${encodeURIComponent(qrCodeMessage)}`;
        window.open(redirectUrl, "_blank"); // buka Web App setelah scan

        html5QrCode.stop(); // stop scanner setelah berhasil
      },
      errorMessage => {
        console.warn(`QR error: ${errorMessage}`);
      }
    );
  </script>
</body>
</html>
